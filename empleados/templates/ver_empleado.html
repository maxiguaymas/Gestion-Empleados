<head>
    <title>Ver Empleado</title>
</head>
{% extends 'base.html' %}
{% load static %}
{% block content %}
<main class="py-5" id="empleados">
    <div class="row justify-content-center pb-5">
        <div class="col-md-6">
            <div class="card shadow">
                <img src="{% static 'images/logo-nuevas-energias-v2.png' %}" alt="Logo" style="max-width: 100px; margin: 0 auto;">
                <div class="card-body">
                    
                    <!-- Panel de Acciones -->
                    {% include 'panel_gestion_empleado.html' %}
                </div>
                <div class="text-center mb-4">
                    <h3 class="mt-3 mb-0">Detalle del Empleado</h3>
                    {% if empleado.ruta_foto %}
                    <img src="{{ empleado.ruta_foto.url }}" alt="Foto de {{ empleado.nombre }}"
                        class="rounded-circle shadow mt-3" style="width: 120px; height: 120px; object-fit: cover;">
                    {% else %}
                    <img src="{% static 'images/default-user.jpg' %}" alt="Sin foto" class="rounded-circle shadow mt-3"
                        style="width: 120px; height: 120px; object-fit: cover;">
                    {% endif %}
                </div>
                <table class="table table-borderless mb-0">
                    <tr>
                        <th>Nombre:</th>
                        <td>{{ empleado.nombre }}</td>
                    </tr>
                    <tr>
                        <th>Apellido:</th>
                        <td>{{ empleado.apellido }}</td>
                    </tr>
                    <tr>
                        <th>DNI:</th>
                        <td>{{ empleado.dni }}</td>
                    </tr>
                    <tr>
                        <th>Teléfono:</th>
                        <td>{{ empleado.telefono|default:'-' }}</td>
                    </tr>
                    <tr>
                        <th>Email:</th>
                        <td>{{ empleado.email }}</td>
                    </tr>
                    <tr>
                        <th>Género:</th>
                        <td>{{ empleado.get_genero_display }}</td>
                    </tr>
                    <tr>
                        <th>Estado civil:</th>
                        <td>{{ empleado.get_estado_civil_display }}</td>
                    </tr>
                    <tr>
                        <th>Fecha de nacimiento:</th>
                        <td>{{ empleado.fecha_nacimiento|date:'d/m/Y' }}</td>
                    </tr>
                    <tr>
                        <th>Estado:</th>
                        <td>{{ empleado.estado }}</td>
                    </tr>
                    <tr>
                        <th>Fecha de ingreso:</th>
                        <td>{{ empleado.fecha_ingreso|date:'d/m/Y' }}</td>
                    </tr>
                    <tr>
                        <th>Fecha de egreso:</th>
                        <td>{{ empleado.fecha_egreso|date:'d/m/Y'|default:'-' }}</td>
                    </tr>
                </table>
                {% if legajo %}
                <hr>
                <h5 class="mt-4">Legajo</h5>
                <table class="table table-borderless mb-0">
                    <tr>
                        <th>Nro Legajo:</th>
                        <td>{{ legajo.nro_leg }}</td>
                    </tr>
                    <tr>
                        <th>Estado:</th>
                        <td>{{ legajo.estado_leg }}</td>
                    </tr>
                    <tr>
                        <th>Fecha de creación:</th>
                        <td>{{ legajo.fecha_creacion_leg|date:'d/m/Y' }}</td>
                    </tr>
                    <tr>
                        <th>Fecha de modificación:</th>
                        <td>{{ legajo.fecha_modificacion_leg|date:'d/m/Y' }}</td>
                    </tr>
                </table>

                <h5 class="mt-4">Documentos del Legajo</h5>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Documento</th>
                                <th>Archivo</th>
                                <th>Estado</th>
                                <th>Fecha de subida</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for doc in documentos %}
                            <tr>
                                <td>{{ doc.id_requisito.nombre_doc }}</td>
                                <td>
                                    {% if doc.ruta_archivo %}
                                    <a href="{{ doc.ruta_archivo.url }}" target="_blank">Ver archivo</a>
                                    {% else %}
                                    <span class="text-danger">No cargado</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if doc.estado_doc %}
                                    <span class="text-success">Cargado</span>
                                    {% else %}
                                    <span class="text-warning">Pendiente</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {{ doc.fecha_hora_subida|date:"d/m/Y H:i" }}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% endif %}
                <div class="mt-4 text-center">
                    <a href="{% url 'ver_empleados' %}" class="btn btn-secondary">Volver</a>
                    
                </div>
            </div>
        </div>
    </div>
    </div>
</main>

{% endblock %}